@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is([data-theme="dark"] *, .dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-surface: var(--surface);
  --color-surface-2: var(--surface-2);
  --color-overlay: var(--overlay);
  --color-scrim: var(--scrim);
  --color-hover-overlay: var(--hover-overlay);
  --color-pressed-overlay: var(--pressed-overlay);
  --color-divider: var(--divider);
  --color-border-strong: var(--border-strong);
  --color-faint: var(--text-faint);
  --font-sans: var(--font-system-sans);
  --font-mono: var(--font-jetbrains-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --spacing: var(--s-1);
  --text-xs: var(--fs-xs);
  --text-xs--line-height: var(--lh-normal);
  --text-sm: var(--fs-sm);
  --text-sm--line-height: var(--lh-normal);
  --text-base: var(--fs-md);
  --text-base--line-height: var(--lh-normal);
  --text-lg: var(--fs-lg);
  --text-lg--line-height: var(--lh-normal);
  --text-xl: var(--fs-xl);
  --text-xl--line-height: var(--lh-tight);
  --text-2xl: var(--fs-xxl);
  --text-2xl--line-height: var(--lh-tight);
  --text-3xl: var(--fs-xxl);
  --text-3xl--line-height: var(--lh-tight);
  --shadow-2xs: var(--shadow-1);
  --shadow-xs: var(--shadow-1);
  --shadow-sm: var(--shadow-1);
  --shadow: var(--shadow-1);
  --shadow-md: var(--shadow-1);
  --shadow-lg: var(--shadow-1);
  --shadow-xl: var(--shadow-1);
  --shadow-2xl: var(--shadow-1);
  --shadow-inner: inset 0 0 0 1px var(--border);
  --radius-sm: var(--r-sm);
  --radius-md: var(--r-md);
  --radius-lg: var(--r-lg);
  --radius-xl: var(--r-xl);
  --radius-2xl: var(--r-xl);
  --radius-3xl: var(--r-xl);
  --radius-4xl: var(--r-pill);
}

:root {
  color-scheme: light dark;

  --font-system-sans: "Inter", system-ui, -apple-system, "Segoe UI", sans-serif;
  --font-sans: var(--font-system-sans);
  --font-mono: var(--font-jetbrains-mono);
  --font-display: var(--font-space-grotesk);

  --border-w: 1px;
  --ring-w: 3px;

  --r-sm: 0.75rem;
  --r-md: 1rem;
  --r-lg: 1.25rem;
  --r-xl: 1.75rem;
  --r-pill: 999px;
  --radius: var(--r-lg);

  --s-1: 0.25rem;
  --s-2: 0.5rem;
  --s-3: 0.75rem;
  --s-4: 1rem;
  --s-5: 1.5rem;
  --s-6: 2rem;
  --s-7: 2.5rem;
  --s-8: 3rem;
  --screen-padding: var(--s-5);
  --card-padding: var(--s-4);
  --card-padding-lg: var(--s-5);

  --fs-xxl: 2rem;
  --fs-xl: 1.5rem;
  --fs-lg: 1.125rem;
  --fs-md: 1rem;
  --fs-sm: 0.875rem;
  --fs-xs: 0.75rem;
  --lh-tight: 1.1;
  --lh-normal: 1.5;
  --fw-regular: 400;
  --fw-medium: 500;
  --fw-semibold: 600;
  --tracking-tight: 0.04em;
  --tracking-wide: 0.08em;

  --tabbar-h: calc(var(--s-8) + var(--s-2));
  --btn-h: calc(var(--s-6) + var(--s-2));
  --chip-h: var(--s-6);
  --iconbtn: var(--s-7);
  --cal-cell: calc(var(--s-5) + var(--s-1));
  --cal-gap: var(--s-1);

  --chart-h: calc(var(--s-8) + var(--s-8) + var(--s-8));
  --chart-point: var(--s-1);
  --chart-stroke: 2px;
  --donut-size: calc(var(--s-8) + var(--s-8));
  --donut-stroke: calc(var(--s-3) + var(--s-1));
  --dial-size: calc(var(--s-8) + var(--s-8) + var(--s-5));
  --dial-stroke: var(--s-2);
  --dial-knob: 6px;
  --play-btn: calc(var(--s-8) + var(--s-5));
  --icon-stroke: 2px;
  --screen-w: 22.5rem;

  --shadow-1: 0 1px 2px color-mix(in oklch, var(--text) 12%, transparent);

  --dur-1: 120ms;
  --dur-2: 220ms;
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);

  --background: var(--bg);
  --foreground: var(--text);
  --card: var(--surface);
  --card-foreground: var(--text);
  --popover: var(--surface-2);
  --popover-foreground: var(--text);
  --primary: var(--text);
  --primary-foreground: var(--bg);
  --secondary: var(--surface-2);
  --secondary-foreground: var(--text);
  --muted: var(--surface-2);
  --muted-foreground: var(--text-muted);
  --accent: var(--surface-2);
  --accent-foreground: var(--text);
  --destructive: var(--text);
  --input: var(--border);
  --ring: var(--focus-ring);
  --chart-1: var(--gray-10);
  --chart-2: var(--gray-8);
  --chart-3: var(--gray-6);
  --chart-4: var(--gray-5);
  --chart-5: var(--gray-4);
  --sidebar: var(--surface);
  --sidebar-foreground: var(--text);
  --sidebar-primary: var(--text);
  --sidebar-primary-foreground: var(--bg);
  --sidebar-accent: var(--surface-2);
  --sidebar-accent-foreground: var(--text);
  --sidebar-border: var(--border);
  --sidebar-ring: var(--focus-ring);
}

:root[data-theme="light"],
:root:not([data-theme]),
.theme-scope[data-theme="light"] {
  --gray-1: #fafafa;
  --gray-2: #f2f2f2;
  --gray-3: #e6e6e6;
  --gray-4: #d6d6d6;
  --gray-5: #c2c2c2;
  --gray-6: #a7a7a7;
  --gray-7: #8a8a8a;
  --gray-8: #6e6e6e;
  --gray-9: #565656;
  --gray-10: #3f3f3f;
  --gray-11: #262626;
  --gray-12: #111111;

  --bg: var(--gray-1);
  --surface: #ffffff;
  --surface-2: var(--gray-2);
  --overlay: rgba(0, 0, 0, 0.92);
  --scrim: rgba(0, 0, 0, 0.4);

  --text: var(--gray-12);
  --text-muted: var(--gray-9);
  --text-faint: var(--gray-7);

  --border: var(--gray-3);
  --border-strong: var(--gray-5);
  --divider: var(--gray-2);

  --focus-ring: color-mix(in oklch, var(--text) 60%, transparent);
  --hover-overlay: color-mix(in oklch, var(--text) 8%, transparent);
  --pressed-overlay: color-mix(in oklch, var(--text) 14%, transparent);

  --overlay-text: var(--gray-1);

  --heat-0: var(--gray-2);
  --heat-1: var(--gray-4);
  --heat-2: var(--gray-6);
  --heat-3: var(--gray-8);
  --heat-4: var(--gray-10);
}

:root[data-theme="dark"],
:root.dark,
.theme-scope[data-theme="dark"] {
  --gray-1: #f5f5f5;
  --gray-2: #e4e4e4;
  --gray-3: #d1d1d1;
  --gray-4: #b8b8b8;
  --gray-5: #9b9b9b;
  --gray-6: #7d7d7d;
  --gray-7: #626262;
  --gray-8: #4a4a4a;
  --gray-9: #353535;
  --gray-10: #242424;
  --gray-11: #181818;
  --gray-12: #0b0b0b;

  --bg: var(--gray-12);
  --surface: var(--gray-11);
  --surface-2: var(--gray-10);
  --overlay: rgba(0, 0, 0, 0.94);
  --scrim: rgba(0, 0, 0, 0.6);

  --text: var(--gray-1);
  --text-muted: var(--gray-4);
  --text-faint: var(--gray-6);

  --border: var(--gray-10);
  --border-strong: var(--gray-8);
  --divider: var(--gray-11);

  --focus-ring: color-mix(in oklch, var(--text) 55%, transparent);
  --hover-overlay: color-mix(in oklch, var(--text) 10%, transparent);
  --pressed-overlay: color-mix(in oklch, var(--text) 18%, transparent);

  --overlay-text: var(--gray-1);

  --heat-0: var(--gray-10);
  --heat-1: var(--gray-9);
  --heat-2: var(--gray-8);
  --heat-3: var(--gray-6);
  --heat-4: var(--gray-4);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --gray-1: #f5f5f5;
    --gray-2: #e4e4e4;
    --gray-3: #d1d1d1;
    --gray-4: #b8b8b8;
    --gray-5: #9b9b9b;
    --gray-6: #7d7d7d;
    --gray-7: #626262;
    --gray-8: #4a4a4a;
    --gray-9: #353535;
    --gray-10: #242424;
    --gray-11: #181818;
    --gray-12: #0b0b0b;

    --bg: var(--gray-12);
    --surface: var(--gray-11);
    --surface-2: var(--gray-10);
    --overlay: rgba(0, 0, 0, 0.94);
    --scrim: rgba(0, 0, 0, 0.6);

    --text: var(--gray-1);
    --text-muted: var(--gray-4);
    --text-faint: var(--gray-6);

    --border: var(--gray-10);
    --border-strong: var(--gray-8);
    --divider: var(--gray-11);

    --focus-ring: color-mix(in oklch, var(--text) 55%, transparent);
    --hover-overlay: color-mix(in oklch, var(--text) 10%, transparent);
    --pressed-overlay: color-mix(in oklch, var(--text) 18%, transparent);

    --overlay-text: var(--gray-1);

    --heat-0: var(--gray-10);
    --heat-1: var(--gray-9);
    --heat-2: var(--gray-8);
    --heat-3: var(--gray-6);
    --heat-4: var(--gray-4);
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    font-size: var(--fs-md);
    line-height: var(--lh-normal);
    -webkit-text-size-adjust: 100%;
  }
  input,
  textarea,
  select,
  button {
    font-size: var(--fs-md);
    line-height: inherit;
    font-family: inherit;
  }
  .font-display {
    font-family: var(--font-display);
  }
}

@layer components {
  .game-shell {
    @apply w-full space-y-5 sm:space-y-6;
  }
  .game-hero {
    @apply flex flex-col gap-2;
  }
  .game-title {
    @apply text-2xl font-semibold tracking-tight;
  }
  .game-badges {
    @apply flex flex-wrap gap-2;
  }
  .game-stats {
    @apply grid gap-3 rounded-2xl border border-border/60 bg-card px-4 py-3 text-sm shadow-sm;
  }
  .game-layout {
    @apply grid gap-4 lg:gap-6 lg:grid-cols-[minmax(0,1fr)_320px];
  }
  .game-surface {
    @apply w-full;
  }
  .game-surface-body {
    @apply p-0 sm:p-2;
  }
  .game-content {
    @apply space-y-4;
  }
  .game-panel {
    @apply rounded-2xl border border-border/60 bg-card shadow-sm;
  }
  .game-panel-padded {
    @apply p-3 sm:p-4;
  }
  .game-panel-title {
    @apply text-xs font-semibold uppercase tracking-wide text-muted-foreground;
  }
  .game-panel-muted {
    @apply bg-muted;
  }
  .game-toolbar {
    @apply flex flex-wrap items-center gap-1.5 sm:gap-2;
  }
  .game-action-row {
    @apply flex flex-wrap items-center justify-center gap-1.5 sm:gap-2;
  }
  .game-helper {
    @apply text-xs text-muted-foreground;
  }
  .game-kbd {
    @apply inline-flex items-center rounded-md border border-border/60 bg-background px-1.5 py-0.5 text-xs font-medium;
  }
  .game-grid-wrap {
    @apply rounded-2xl border border-border/60 bg-background p-2 w-full overflow-x-auto flex justify-center items-start;
  }
  .game-chip {
    @apply rounded-4xl border border-border/60 bg-background px-2 py-0.5 text-xs font-medium;
  }
}

@keyframes skeleton-shimmer {
  0%,
  100% {
    opacity: 0.6;
  }
  50% {
    opacity: 0.35;
  }
}

@layer utilities {
  .skeleton-shimmer {
    animation: skeleton-shimmer 1.4s ease-in-out infinite;
  }
}
